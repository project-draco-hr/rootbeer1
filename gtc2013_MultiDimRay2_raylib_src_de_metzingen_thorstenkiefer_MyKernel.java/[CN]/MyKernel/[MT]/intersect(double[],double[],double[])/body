{
  sub(observer,sphere,regs[0]);
  double a=mul(dir,dir);
  double b=2 * mul(regs[0],dir);
  double c=mul(regs[0],regs[0]) - radius * radius;
  double x=b * b - 4 * a * c;
  if (x < 0) {
  }
 else   if (x == 0) {
    intersections[numIntersections]=-b / 2 / a;
    intersectionso[numIntersections]=sphere;
    numIntersections++;
  }
 else {
    intersections[numIntersections]=(-b + Math.sqrt(x)) / a / 2;
    intersectionso[numIntersections]=sphere;
    numIntersections++;
    intersections[numIntersections]=(-b - Math.sqrt(x)) / a / 2;
    intersectionso[numIntersections]=sphere;
    numIntersections++;
  }
}
