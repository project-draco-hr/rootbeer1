{
  m_runStopwatch.start();
  RootbeerGpu.setIsOnGpu(true);
  m_FirstJob=(CompiledKernel)job_template;
  if (thread_config != null) {
    m_BlockShape=thread_config.getBlockShapeX();
    m_GridShape=thread_config.getGridShapeX();
    m_NumThreads=m_BlockShape * m_GridShape;
  }
  writeSingleBlock(job_template);
  String filename;
  if (m_32bit) {
    filename=m_FirstJob.getCubin32();
  }
 else {
    filename=m_FirstJob.getCubin64();
  }
  if (filename.endsWith(".error")) {
    return;
  }
  if (thread_config == null) {
    calculateShape();
  }
  compileCode();
  Object gpu_thrown=null;
  try {
    runOnGpu();
    readSingleBlock(job_template);
    unload();
  }
 catch (  Throwable ex) {
    gpu_thrown=ex;
  }
  RootbeerGpu.setIsOnGpu(false);
  m_runStopwatch.stop();
  m_overallTime=m_runStopwatch.elapsedTimeMillis();
  StatsRow stats_row=new StatsRow(m_serializationTime,m_executionTime,m_deserializationTime,m_overallTime,m_GridShape,m_BlockShape);
  rootbeer.addStatsRow(stats_row);
  if (gpu_thrown != null) {
    if (gpu_thrown instanceof NullPointerException) {
      NullPointerException null_ex=(NullPointerException)gpu_thrown;
      throw null_ex;
    }
 else     if (gpu_thrown instanceof OutOfMemoryError) {
      OutOfMemoryError no_mem=(OutOfMemoryError)gpu_thrown;
      throw no_mem;
    }
 else     if (gpu_thrown instanceof Error) {
      Error error=(Error)gpu_thrown;
      throw error;
    }
 else     if (gpu_thrown instanceof RuntimeException) {
      RuntimeException runtime_ex=(RuntimeException)gpu_thrown;
      throw runtime_ex;
    }
 else {
      throw new RuntimeException("unknown exception type.");
    }
  }
}
