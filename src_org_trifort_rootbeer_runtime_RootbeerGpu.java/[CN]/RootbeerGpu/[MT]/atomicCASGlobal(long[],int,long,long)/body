{
synchronized (array) {
    long old=array[index];
    if (old == compare) {
      array[index]=value;
    }
    return old;
  }
}
