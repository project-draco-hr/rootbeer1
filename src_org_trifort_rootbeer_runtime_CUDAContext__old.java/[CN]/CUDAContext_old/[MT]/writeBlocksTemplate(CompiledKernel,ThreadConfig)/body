{
  m_writeBlocksStopwatch.start();
  m_objectMemory.clearHeapEndPtr();
  m_handlesMemory.clearHeapEndPtr();
  Serializer serializer=compiled_kernel.getSerializer(m_objectMemory,m_textureMemory);
  serializer.writeStaticsToHeap();
  long handle=serializer.writeToHeap(compiled_kernel);
  m_handlesMemory.writeRef(handle);
  m_objectMemory.align16();
  if (Configuration.getPrintMem()) {
    BufferPrinter printer=new BufferPrinter();
    printer.print(m_objectMemory,0,256);
  }
  m_writeBlocksStopwatch.stop();
  m_serializationTime=m_writeBlocksStopwatch.elapsedTimeMillis();
}
