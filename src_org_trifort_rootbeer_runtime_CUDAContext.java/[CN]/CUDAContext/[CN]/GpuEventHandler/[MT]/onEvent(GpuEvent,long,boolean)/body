{
switch (gpuEvent.getValue()) {
case NATIVE_BUILD_STATE:
    boolean usingExceptions=Configuration.runtimeInstance().getExceptions();
  nativeBuildState(nativeContext,gpuDevice.getDeviceId(),cubinFile,cubinFile.length,threadConfig.getBlockShapeX(),threadConfig.getGridShapeX(),threadConfig.getNumThreads(),objectMemory,exceptionsMemory,classMemory,b2i(usingExceptions),cacheConfig.ordinal());
gpuEvent.getFuture().signal();
break;
case NATIVE_RUN:
writeBlocksTemplate();
runGpu();
readBlocksTemplate();
gpuEvent.getFuture().signal();
break;
}
}
