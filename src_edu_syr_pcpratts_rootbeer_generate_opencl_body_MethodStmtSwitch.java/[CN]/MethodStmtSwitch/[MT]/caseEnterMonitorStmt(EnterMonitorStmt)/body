{
  String id=getVarName();
  String mem=getVarName();
  String count=getVarName();
  String old=getVarName();
  m_oldValueFromMonitorStack.push(old);
  m_output.append("int " + id + " = getThreadId();\n");
  m_output.append("char * " + mem + " = edu_syr_pcpratts_gc_deref(gc_info, ");
  arg0.getOp().apply(m_valueSwitch);
  m_output.append(");\n");
  m_output.append(mem + " += 12;\n");
  m_output.append("int " + count + " = 0;\n");
  m_output.append("int " + old + ";\n");
  m_output.append("while(" + count + " < 100){\n");
  m_output.append("  " + old + " = atomicCAS((int *) "+ mem+ ", -1, "+ id+ ");\n");
  m_output.append("  if(" + old + " != -1 && "+ old+ " != "+ id+ "){\n");
  m_output.append("    " + count + "++;\n");
  m_output.append("    if(" + count + " >= 99){\n");
  m_output.append("      " + count + " = 0;\n");
  m_output.append("    }\n");
  m_output.append("  } else {\n");
}
