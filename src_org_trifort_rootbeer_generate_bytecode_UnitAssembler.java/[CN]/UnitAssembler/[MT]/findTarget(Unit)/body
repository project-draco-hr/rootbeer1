{
  for (int i=0; i < mInputUnits.size(); ++i) {
    Unit curr=mInputUnits.get(i);
    if (unitEquals(target,curr))     return i;
  }
  throw new RuntimeException("Cannot find target while assembling units: " + target.toString());
}
