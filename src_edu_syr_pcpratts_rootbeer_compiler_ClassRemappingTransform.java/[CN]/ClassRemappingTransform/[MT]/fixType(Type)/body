{
  if (type instanceof RefType) {
    RefType ref_type=(RefType)type;
    SootClass soot_class=ref_type.getSootClass();
    if (shouldMap(soot_class)) {
      SootClass new_class=getMapping(soot_class);
      return new_class.getType();
    }
 else {
      return type;
    }
  }
 else   if (type instanceof ArrayType) {
    ArrayType array_type=(ArrayType)type;
    Type base=fixType(array_type.baseType);
    return ArrayType.v(base,array_type.numDimensions);
  }
 else {
    return type;
  }
}
